<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Help Doc Scorer</title>
  <meta name="description" content="Score your documentation for AI-friendliness. Identify issues that affect how AI assistants understand and use your help content.">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Playfair+Display:wght@600;700&display=swap" rel="stylesheet">

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- Toast Container -->
  <div id="toastContainer" class="toast-container" aria-live="polite"></div>

  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div class="logo">
        <span class="logo-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <polyline points="14 2 14 8 20 8"/>
            <line x1="16" y1="13" x2="8" y2="13"/>
            <line x1="16" y1="17" x2="8" y2="17"/>
            <polyline points="10 9 9 9 8 9"/>
          </svg>
        </span>
        <span class="logo-text">AI Doc Scorer</span>
      </div>

      <nav class="header-nav">
        <button id="settingsToggle" class="btn btn-ghost btn-api-key" aria-label="Configure API Key">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"/>
          </svg>
          <span>API Key</span>
          <span id="apiKeyIndicator" class="api-key-indicator"></span>
        </button>
        <button id="themeToggle" class="icon-btn" aria-label="Toggle theme">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
          </svg>
        </button>
      </nav>
    </div>
  </header>

  <!-- Settings Panel -->
  <div id="settingsPanel" class="settings-panel hidden">
    <div class="settings-content">
      <h3>Settings</h3>

      <div class="setting-group">
        <label for="apiKeyInput">Claude API Key</label>
        <p class="setting-help">Required for semantic analysis. Get your key from <a href="https://console.anthropic.com/" target="_blank" rel="noopener">console.anthropic.com</a></p>
        <form id="apiKeyForm" class="api-key-form">
          <input
            type="password"
            id="apiKeyInput"
            placeholder="sk-ant-api03-..."
            autocomplete="off"
          >
          <button type="submit" class="btn btn-primary">Save</button>
        </form>
        <div class="api-key-actions">
          <span id="apiKeyStatus" class="api-status status-missing">No API key set</span>
          <button id="testApiKey" class="btn btn-small">Test Key</button>
          <button id="clearApiKey" class="btn btn-small btn-danger hidden">Clear Key</button>
        </div>
      </div>

      <div class="setting-group">
        <h4>About</h4>
        <p class="setting-help">
          This tool scores documentation for AI-friendliness based on criteria from the Zoho Zia Search team.
          It helps identify issues that affect how AI assistants understand and use help content.
        </p>
      </div>
    </div>
  </div>

  <!-- Main Content -->
  <main class="main">
    <!-- Landing View -->
    <div id="landingView" class="view landing-view">
      <div class="landing-grid">
        <!-- Left Column: Hero + Bookmarklet -->
        <div class="landing-left">
          <h1 class="hero-title">Score Zoho Docs<br>for AI Readiness</h1>
          <p class="hero-subtitle">
            Analyze help.zoho.com pages for AI-friendliness. Get a score and actionable fixes to improve how Zia and other AI assistants understand your documentation.
          </p>

          <div class="bookmarklet-box">
            <p class="drag-instruction">Drag to your bookmarks bar:</p>
            <a id="bookmarkletLink" href="#" class="bookmarklet-btn" onclick="return false;">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                <path d="M14 2v6h6"/>
                <path d="M9 15l2 2 4-4"/>
              </svg>
              Score This Page
            </a>
            <button id="copyBookmarklet" class="btn btn-small">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" width="14" height="14">
                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
              </svg>
              Copy Code
            </button>
          </div>
        </div>

        <!-- Right Column: How It Works -->
        <div class="landing-right">
          <h2 class="how-it-works-title">How It Works</h2>

          <div class="numbered-list">
            <div class="numbered-item">
              <div class="numbered-item-left">
                <div class="numbered-item-number">1.</div>
                <div class="numbered-item-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"/>
                  </svg>
                </div>
              </div>
              <div class="numbered-item-content">
                <h3>Install Bookmarklet</h3>
                <p>Drag the button to your bookmarks bar. One-time setup.</p>
              </div>
            </div>
            <div class="numbered-item">
              <div class="numbered-item-left">
                <div class="numbered-item-number">2.</div>
                <div class="numbered-item-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <circle cx="12" cy="12" r="10"/>
                    <line x1="2" y1="12" x2="22" y2="12"/>
                    <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                  </svg>
                </div>
              </div>
              <div class="numbered-item-content">
                <h3>Visit Help Page</h3>
                <p>Navigate to any help.zoho.com documentation page.</p>
              </div>
            </div>
            <div class="numbered-item">
              <div class="numbered-item-left">
                <div class="numbered-item-number">3.</div>
                <div class="numbered-item-icon">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                    <polyline points="22 4 12 14.01 9 11.01"/>
                  </svg>
                </div>
              </div>
              <div class="numbered-item-content">
                <h3>Click to Score</h3>
                <p>Get instant analysis with actionable fixes.</p>
              </div>
            </div>
          </div>

          <div class="bookmarklet-explainer">
            <strong>What's a bookmarklet?</strong>
            A bookmarklet is JavaScript saved as a bookmark. Click it on any help.zoho.com page to extract and score the content. Your data stays in your browser.
          </div>

          <div class="api-hint">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="16" x2="12" y2="12"/>
              <line x1="12" y1="8" x2="12.01" y2="8"/>
            </svg>
            <p>Add your <button class="link-btn" onclick="document.getElementById('settingsPanel').classList.toggle('hidden')">Claude API Key</button> for deeper semantic analysis.</p>
          </div>
        </div>
      </div>

      <!-- Why Box (full width) -->
      <div class="why-box">
        <h3>Why AI-Friendly Docs Matter</h3>
        <p>
          Zia and other AI assistants rely on documentation to answer user questions.
          When docs have unclear structure, ambiguous terminology, or missing context,
          AI responses suffer. This tool helps you identify and fix these issues
          before they impact users.
        </p>
      </div>

      <!-- Trust Signals Footer -->
      <div class="trust-signals">
        <span>100% client-side</span>
        <span class="divider"></span>
        <span>Privacy-first</span>
        <span class="divider"></span>
        <span>No signup required</span>
      </div>
    </div>

    <!-- Scoring View (Loading) -->
    <div id="scoringView" class="view scoring-view hidden">
      <div class="scoring-card">
        <div class="scoring-animation">
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          <div class="pulse-ring"></div>
          <svg class="scoring-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
            <path d="M14 2v6h6"/>
            <path d="M9 15l2 2 4-4"/>
          </svg>
        </div>
        <h2>Analyzing Documentation</h2>
        <p id="progressText" class="progress-text">Extracting content...</p>
        <div class="progress-bar-container">
          <div id="progressBar" class="progress-bar" style="width: 0%"></div>
        </div>
        <p id="errorMessage" class="error-message hidden"></p>
      </div>
    </div>

    <!-- Results View -->
    <div id="resultsView" class="view results-view hidden">
      <div class="results-header">
        <button id="backToLanding" class="btn btn-ghost">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M19 12H5M12 19l-7-7 7-7"/>
          </svg>
          Back
        </button>
        <div class="results-actions">
          <button id="scoreAgain" class="btn btn-secondary">Score Again</button>
          <button data-export="clipboard" class="btn btn-secondary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
            </svg>
            Copy
          </button>
          <button data-export="markdown" class="btn btn-primary">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
              <polyline points="7 10 12 15 17 10"/>
              <line x1="12" y1="15" x2="12" y2="3"/>
            </svg>
            Download Report
          </button>
        </div>
      </div>

      <div class="results-layout">
        <div class="results-main">
          <!-- Summary Card -->
          <section class="summary-card">
            <div class="summary-left">
              <div class="page-info">
                <h1 id="pageTitle" class="page-title">Page Title</h1>
                <a id="pageUrl" href="#" target="_blank" class="page-url">URL</a>
              </div>
              <div class="score-gauge-container">
                <canvas id="scoreGauge" width="200" height="200"></canvas>
              </div>
            </div>
            <div class="summary-right">
              <div class="score-display">
                <span id="compositeScore" class="score-value">0.0</span>
                <span class="score-label">/10</span>
                <span id="statusBadge" class="status-badge">Status</span>
              </div>
              <p id="summaryText" class="summary-text">Summary text here</p>
            </div>
          </section>

          <!-- Category Breakdown -->
          <section class="categories-section">
            <h2 class="section-title">Category Breakdown</h2>
            <div class="category-chart-container">
              <canvas id="categoryChart" height="200"></canvas>
            </div>
            <div id="categoryCards" class="category-cards">
              <!-- Populated by JS -->
            </div>
          </section>

          <!-- Top Issues -->
          <section class="issues-section">
            <h2 class="section-title">Top Issues to Fix</h2>
            <div id="topIssues" class="issues-list">
              <!-- Populated by JS -->
            </div>
          </section>

          <!-- All Issues (Collapsible) -->
          <section class="all-issues-section">
            <details class="all-issues-details">
              <summary>
                All Issues (<span id="issueCount">0</span>)
              </summary>
              <div id="allIssues" class="all-issues-list">
                <!-- Populated by JS -->
              </div>
            </details>
          </section>
        </div>

        <aside class="results-sidebar">
          <h3 class="sidebar-title">Recent Pages</h3>
          <div id="historyList" class="history-list">
            <p class="no-history">No pages scored yet</p>
          </div>
        </aside>
      </div>
    </div>
  </main>

  <!-- Scripts -->
  <script src="js/storage.js"></script>
  <script src="js/parser.js"></script>
  <script src="js/rules/content-structure.js"></script>
  <script src="js/rules/terminology.js"></script>
  <script src="js/rules/text-over-visuals.js"></script>
  <script src="js/claude-client.js"></script>
  <script src="js/scorer.js"></script>
  <script src="js/export.js"></script>
  <script src="js/charts.js"></script>
  <script src="js/app.js"></script>
</body>
</html>
